<label
  *ngIf="label"
  class="block text-sm font-medium mb-1"
  [attr.for]="inputId || name"
  >{{ label }}</label
>
<div class="relative">
  <!-- Input -->
  <ng-container [ngSwitch]="type">
    <input
      *ngSwitchCase="'currency'"
      [attr.id]="inputId || name"
      [attr.name]="name"
      type="text"
      inputmode="decimal"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [attr.aria-invalid]="invalid"
      [class]="effectiveClass + ' tabular-nums'"
      [value]="getCurrency()"
      (input)="currencyInput($any($event.target).value)"
      (focus)="currencyFocus($event)"
      (blur)="currencyBlur()"
    />

    <input
      *ngSwitchCase="'percent'"
      [attr.id]="inputId || name"
      [attr.name]="name"
      type="text"
      inputmode="decimal"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [attr.aria-invalid]="invalid"
      [class]="effectiveClass + ' tabular-nums'"
      [value]="getPercent()"
      (input)="percentInput($any($event.target).value)"
      (focus)="percentFocus()"
      (blur)="percentBlur()"
    />

    <input
      *ngSwitchCase="'date'"
      [attr.id]="inputId || name"
      [attr.name]="name"
      type="date"
      [disabled]="disabled"
      [attr.min]="min"
      [attr.max]="max"
      [class]="effectiveClass"
      [(ngModel)]="value"
      (ngModelChange)="onChange($event)"
      (blur)="onTouched()"
    />

    <select
      *ngSwitchCase="'select'"
      [attr.id]="inputId || name"
      [attr.name]="name"
      [disabled]="disabled"
      [class]="effectiveClass"
      [(ngModel)]="value"
      (ngModelChange)="onChange($event)"
      (blur)="onTouched()"
    >
      <option *ngIf="placeholderOption" value="" disabled selected>
        {{ placeholder || "Seleccione..." }}
      </option>
      <option *ngFor="let option of options" [value]="getValue(option)">
        {{ getLabel(option) }}
      </option>
    </select>

    <input
      *ngSwitchDefault
      [attr.id]="inputId || name"
      [attr.name]="name"
      [type]="displayType"
      [placeholder]="placeholder"
      [disabled]="disabled"
      [attr.autocomplete]="autocomplete"
      [attr.min]="min"
      [attr.max]="max"
      [attr.step]="step"
      [attr.aria-invalid]="invalid"
      [attr.aria-describedby]="describedBy"
      [class]="effectiveClass"
      [(ngModel)]="value"
      (ngModelChange)="onChange($event)"
      (blur)="onTouched()"
      (keyup.enter)="enter.emit()"
    />
  </ng-container>
  <button
    *ngIf="isPasswordToggle"
    type="button"
    (click)="togglePassword()"
    class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700 dark:text-white/70 dark:hover:text-white focus:outline-none"
    [attr.aria-label]="
      showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'
    "
    [attr.tabindex]="disabled ? -1 : 0"
  >
    <i class="pi" [ngClass]="showPassword ? 'pi-eye-slash' : 'pi-eye'"></i>
  </button>
</div>

<div
  *ngIf="message || hint"
  class="mt-1 text-xs"
  [ngClass]="
    invalid && message
      ? 'text-red-600 dark:text-red-400'
      : 'text-gray-500 dark:text-gray-400'
  "
>
  {{ message || hint }}
</div>

<div class="mx-auto w-full max-w-md pt-8 md:pt-0">
  <h2 class="text-8xl md:text-7xl font-extrabold leading-none">
    Dinámica<br /><span class="block">CRM</span>
  </h2>

  <form
    class="mt-10 space-y-5"
    [formGroup]="form"
    (ngSubmit)="onSubmit()"
    novalidate
  >
    <!-- Correo -->
    <div>
      <app-input
        inputId="correo"
        name="correo"
        type="email"
        label="Correo"
        placeholder="ejemplo@correo.com"
        [invalid]="fc.correo.touched && fc.correo.invalid"
        describedBy="emailHelp"
        formControlName="correo"
      />
      <p
        id="emailHelp"
        class="text-xs text-gray-600 dark:text-gray-300 mt-1"
        *ngIf="fc.correo.touched && fc.correo.invalid"
      >
        {{
          fc.correo.errors?.['required']
            ? 'El correo es obligatorio'
            : fc.correo.errors?.['email']
            ? 'Formato de correo inválido'
            : ''
        }}
      </p>
    </div>

    <!-- Password -->
    <div>
      <app-input
        inputId="password"
        name="password"
        type="password"
        label="Contraseña"
        [invalid]="fc.password.touched && fc.password.invalid"
        formControlName="password"
      />
      <p
        class="text-xs text-gray-600 dark:text-gray-300 mt-1"
        *ngIf="fc.password.touched && fc.password.invalid"
      >
        {{
          fc.password.errors?.['required']
            ? 'La contraseña es obligatoria'
            : fc.password.errors?.['minlength']
            ? 'Mínimo 8 caracteres'
            : ''
        }}
      </p>
    </div>

    <!-- Botón -->
    <button
      type="submit"
      [disabled]="form.invalid || loading"
      class="w-full rounded-xl py-2 font-medium text-white bg-blue-500 hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed"
      aria-label="Ingresar"
      [attr.aria-busy]="loading"
    >
      <ng-container *ngIf="loading; else ingresarLabel">
        <span class="inline-flex items-center justify-center gap-2">
          <i class="pi pi-spinner pi-spin text-lg" aria-hidden="true"></i>
          <span class="sr-only">Ingresando...</span>
        </span>
      </ng-container>
      <ng-template #ingresarLabel>Ingresar</ng-template>
    </button>

    <!-- opciones -->
    <div class="flex items-center gap-3 pt-1">
      <app-checkbox
        inputId="remember"
        name="remember"
        label="Recuérdame"
        [(ngModel)]="remember"
        [ngModelOptions]="{ standalone: true }"
      />
    </div>

    <div class="pt-2 text-center">
      <a
        routerLink="/ayuda"
        class="text-sm text-gray-600 dark:text-gray-300 underline underline-offset-2 hover:text-yellow-600 dark:hover:text-yellow-400"
        href="#"
        (click)="$event.preventDefault()"
      >
        ¿Olvidaste tu contraseña?
      </a>
    </div>

    <p class="text-sm text-red-600" *ngIf="error">{{ error }}</p>
  </form>
</div>
